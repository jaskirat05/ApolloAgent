# Sequential Chain Example
# Each step runs one after another

name: video-generation-and-upscale
description: |
  Generates a video and then upscales it to 4K.
  Demonstrates sequential execution where each step depends on the previous one.

steps:
  # Step 1: Generate base video
  - id: generate
    workflow: video_wan2_2_14B_i2v
    description: Generate a dragon video at 512x512
    parameters:
      prompt: "A majestic dragon flying over misty mountains at sunset"
      negative_prompt: "blurry, low quality, distorted"
      width: 512
      height: 512
      frames: 120
      steps: 30
      cfg: 7.5

  # Step 2: Upscale the generated video (depends on step 1)
  - id: upscale
    workflow: video_upscale_4k
    description: Upscale the video to 4K resolution
    depends_on: [generate]
    parameters:
      input_video: "{{ generate.output.video }}"
      target_width: 2048
      target_height: 2048
      quality: high

  # Step 3: Add audio (depends on step 2)
  - id: add_audio
    workflow: add_audio_track
    description: Add epic music to the upscaled video
    depends_on: [upscale]
    parameters:
      input_video: "{{ upscale.output.video }}"
      audio_file: "epic_dragon_music.mp3"
      audio_volume: 0.8

metadata:
  author: ComfyAutomate
  version: "1.0"
  tags: ["video", "sequential", "upscale"]
